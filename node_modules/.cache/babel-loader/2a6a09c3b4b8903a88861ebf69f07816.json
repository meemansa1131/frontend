{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.accessTokenSignature = exports.requestTokenSignature = void 0;\n\nvar crypto_js_1 = require(\"crypto-js\");\n\nexports.requestTokenSignature = function (_a) {\n  var method = _a.method,\n      apiUrl = _a.apiUrl,\n      callbackUrl = _a.callbackUrl,\n      consumerKey = _a.consumerKey,\n      consumerSecret = _a.consumerSecret;\n  var params = {\n    oauth_consumer_key: consumerKey,\n    oauth_version: \"1.0\",\n    oauth_signature_method: \"HMAC-SHA1\",\n    oauth_callback: callbackUrl,\n    oauth_timestamp: (Date.now() / 1000).toFixed(),\n    oauth_nonce: Math.random().toString(36).replace(/[^a-z]/, \"\").substr(2)\n  };\n  return makeSignature(params, method, apiUrl, consumerSecret);\n};\n\nexports.accessTokenSignature = function (_a) {\n  var consumerKey = _a.consumerKey,\n      consumerSecret = _a.consumerSecret,\n      oauthToken = _a.oauthToken,\n      oauthVerifier = _a.oauthVerifier,\n      method = _a.method,\n      apiUrl = _a.apiUrl;\n  var params = {\n    oauth_consumer_key: consumerKey,\n    oauth_version: \"1.0\",\n    oauth_signature_method: \"HMAC-SHA1\",\n    oauth_token: oauthToken,\n    oauth_verifier: oauthVerifier,\n    oauth_timestamp: (Date.now() / 1000).toFixed(),\n    oauth_nonce: Math.random().toString(36).replace(/[^a-z]/, \"\").substr(2)\n  };\n  return makeSignature(params, method, apiUrl, consumerSecret);\n};\n\nvar makeSignature = function (params, method, apiUrl, consumerSecret) {\n  var paramsBaseString = Object.keys(params).sort().reduce(function (prev, el) {\n    return prev += \"&\" + el + \"=\" + params[el];\n  }, \"\").substr(1);\n  var signatureBaseString = method.toUpperCase() + \"&\" + encodeURIComponent(apiUrl) + \"&\" + encodeURIComponent(paramsBaseString);\n  var signingKey = encodeURIComponent(consumerSecret) + \"&\";\n  var oauth_signature = crypto_js_1.enc.Base64.stringify(crypto_js_1.HmacSHA1(signatureBaseString, signingKey));\n\n  var paramsWithSignature = __assign(__assign({}, params), {\n    oauth_signature: encodeURIComponent(oauth_signature)\n  });\n\n  return Object.keys(paramsWithSignature).sort().reduce(function (prev, el) {\n    return prev += \",\" + el + \"=\\\"\" + paramsWithSignature[el] + \"\\\"\";\n  }, \"\").substr(1);\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AAEaA,gCAAwB,UAACC,EAAD,EAYpC;MAXCC,MAAM;MACNC,MAAM;MACNC,WAAW;MACXC,WAAW;MACXC,cAAc;AAQd,MAAMC,MAAM,GAAG;AACbC,sBAAkB,EAAEH,WADP;AAEbI,iBAAa,EAAE,KAFF;AAGbC,0BAAsB,EAAE,WAHX;AAIbC,kBAAc,EAAEP,WAJH;AAKbQ,mBAAe,EAAE,CAACC,IAAI,CAACC,GAAL,KAAa,IAAd,EAAoBC,OAApB,EALJ;AAMbC,eAAW,EAAEC,IAAI,CAACC,MAAL,GACVC,QADU,CACD,EADC,EAEVC,OAFU,CAEF,QAFE,EAEQ,EAFR,EAGVC,MAHU,CAGH,CAHG;AANA,GAAf;AAYA,SAAOC,aAAa,CAACf,MAAD,EAASL,MAAT,EAAiBC,MAAjB,EAAyBG,cAAzB,CAApB;AACD,CA1BY;;AA4BAN,+BAAuB,UAACC,EAAD,EAcnC;MAbCI,WAAW;MACXC,cAAc;MACdiB,UAAU;MACVC,aAAa;MACbtB,MAAM;MACNC,MAAM;AASN,MAAMI,MAAM,GAAG;AACbC,sBAAkB,EAAEH,WADP;AAEbI,iBAAa,EAAE,KAFF;AAGbC,0BAAsB,EAAE,WAHX;AAIbe,eAAW,EAAEF,UAJA;AAKbG,kBAAc,EAAEF,aALH;AAMbZ,mBAAe,EAAE,CAACC,IAAI,CAACC,GAAL,KAAa,IAAd,EAAoBC,OAApB,EANJ;AAObC,eAAW,EAAEC,IAAI,CAACC,MAAL,GACVC,QADU,CACD,EADC,EAEVC,OAFU,CAEF,QAFE,EAEQ,EAFR,EAGVC,MAHU,CAGH,CAHG;AAPA,GAAf;AAaA,SAAOC,aAAa,CAACf,MAAD,EAASL,MAAT,EAAiBC,MAAjB,EAAyBG,cAAzB,CAApB;AACD,CA7BY;;AA+Bb,IAAMgB,aAAa,GAAG,UACpBf,MADoB,EAEpBL,MAFoB,EAGpBC,MAHoB,EAIpBG,cAJoB,EAIE;AAEtB,MAAMqB,gBAAgB,GAAGC,MAAM,CAACC,IAAP,CAAYtB,MAAZ,EACtBuB,IADsB,GAEtBC,MAFsB,CAEf,UAACC,IAAD,EAAeC,EAAf,EAAsB;AAC5B,WAAQD,IAAI,IAAI,MAAIC,EAAJ,GAAM,GAAN,GAAU1B,MAAM,CAAC0B,EAAD,CAAhC;AACD,GAJsB,EAIpB,EAJoB,EAKtBZ,MALsB,CAKf,CALe,CAAzB;AAOA,MAAMa,mBAAmB,GAAMhC,MAAM,CAACiC,WAAP,KAAoB,GAApB,GAAwBC,kBAAkB,CACvEjC,MADuE,CAA1C,GAE9B,GAF8B,GAE1BiC,kBAAkB,CAACT,gBAAD,CAFvB;AAIA,MAAMU,UAAU,GAAMD,kBAAkB,CAAC9B,cAAD,CAAlB,GAAkC,GAAxD;AAEA,MAAMgC,eAAe,GAAGC,gBAAIC,MAAJ,CAAWC,SAAX,CACtBF,qBAASL,mBAAT,EAA8BG,UAA9B,CADsB,CAAxB;;AAIA,MAAMK,mBAAmB,yBACpBnC,MADoB,GACd;AACT+B,mBAAe,EAAEF,kBAAkB,CAACE,eAAD;AAD1B,GADc,CAAzB;;AAKA,SAAOV,MAAM,CAACC,IAAP,CAAYa,mBAAZ,EACJZ,IADI,GAEJC,MAFI,CAEG,UAACC,IAAD,EAAeC,EAAf,EAAsB;AAC5B,WAAQD,IAAI,IAAI,MAAIC,EAAJ,GAAM,KAAN,GAAWS,mBAAmB,CAACT,EAAD,CAA9B,GAAkC,IAAlD;AACD,GAJI,EAIF,EAJE,EAKJZ,MALI,CAKG,CALH,CAAP;AAMD,CAlCD","names":["exports","_a","method","apiUrl","callbackUrl","consumerKey","consumerSecret","params","oauth_consumer_key","oauth_version","oauth_signature_method","oauth_callback","oauth_timestamp","Date","now","toFixed","oauth_nonce","Math","random","toString","replace","substr","makeSignature","oauthToken","oauthVerifier","oauth_token","oauth_verifier","paramsBaseString","Object","keys","sort","reduce","prev","el","signatureBaseString","toUpperCase","encodeURIComponent","signingKey","oauth_signature","crypto_js_1","Base64","stringify","paramsWithSignature"],"sourceRoot":"","sources":["../../src/services/signature.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}